<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–µ–ø–∞: –î–æ–ª–≥–æ–≤–∞—è —è–º–∞ 2.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --danger: #ff416c;
            --success: #24c484;
            --warning: #ff9d00;
            --dark: #2d3748;
            --light: #f8f9fa;
            --neon: #0ff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        .header {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            z-index: -1;
            animation: shine 3s infinite;
        }
        
        h1 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff9a9e, #fad0c4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 10px rgba(255, 154, 158, 0.5);
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-item:hover {
            transform: scale(1.05);
        }
        
        .stat-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .stat-item:hover::after {
            left: 100%;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 1.1rem;
            margin-top: 5px;
        }
        
        .progress-container {
            margin-top: 10px;
        }
        
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--warning));
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        .actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .action-btn {
            padding: 15px 10px;
            border: none;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            min-height: 80px;
            position: relative;
            overflow: hidden;
        }
        
        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .action-btn:hover::before {
            left: 100%;
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .action-btn:active {
            transform: translateY(1px);
        }
        
        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .action-icon {
            font-size: 1.5rem;
        }
        
        .events {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            max-height: 200px;
            overflow-y: auto;
            backdrop-filter: blur(10px);
            position: relative;
        }
        
        .events::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(transparent 90%, rgba(0,0,0,0.7));
            pointer-events: none;
            z-index: 1;
        }
        
        .event {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            animation: slideIn 0.5s ease;
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
            position: relative;
            z-index: 2;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .event:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .event.danger {
            border-left-color: var(--danger);
            background: linear-gradient(90deg, rgba(255, 65, 108, 0.1), rgba(0,0,0,0.3));
        }
        
        .event.success {
            border-left-color: var(--success);
            background: linear-gradient(90deg, rgba(36, 196, 132, 0.1), rgba(0,0,0,0.3));
        }
        
        .event.warning {
            border-left-color: var(--warning);
            background: linear-gradient(90deg, rgba(255, 157, 0, 0.1), rgba(0,0,0,0.3));
        }
        
        .event-info {
            border-left-color: var(--secondary);
            background: linear-gradient(90deg, rgba(37, 117, 252, 0.1), rgba(0,0,0,0.3));
        }
        
        .character-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 15px 0;
            position: relative;
            transition: transform 0.5s ease;
        }
        
        .stepa {
            font-size: 4rem;
            transition: all 0.5s ease;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.3));
            position: relative;
        }
        
        .stepa.happy {
            transform: scale(1.1) rotate(5deg);
        }
        
        .stepa.stressed {
            transform: scale(0.9) rotate(-5deg);
        }
        
        .stepa.beaten {
            animation: shake 0.5s ease-in-out;
        }
        
        .phone-ringing {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--danger);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 1s infinite;
            z-index: 10;
        }
        
        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            padding: 20px;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }
        
        .game-over h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--danger), var(--warning));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .game-over p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            line-height: 1.5;
        }
        
        .restart-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .restart-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .restart-btn:hover::before {
            left: 100%;
        }
        
        .restart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            padding: 25px;
            border-radius: 20px;
            max-width: 95%;
            max-height: 85%;
            overflow-y: auto;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s ease;
            position: relative;
            border: 2px solid #ff6b6b;
            width: 90%;
        }
        
        .modal-content::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 25px;
            background: linear-gradient(45deg, #ff6b6b, #ffa726, #4ecdc4, #45b7d1);
            z-index: -1;
            animation: borderRotate 3s linear infinite;
        }
        
        .modal-title {
            font-size: 1.6rem;
            margin-bottom: 20px;
            text-align: center;
            color: #ffa726;
            text-shadow: 0 0 10px rgba(255, 167, 38, 0.5);
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 167, 38, 0.3);
        }
        
        .car-option, .stress-option, .friend-option {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            padding: 18px;
            border-radius: 12px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border-left: 4px solid #ffa726;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .car-option:hover, .stress-option:hover, .friend-option:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.1));
            transform: translateX(8px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .car-name, .friend-name {
            font-weight: bold;
            font-size: 1.2rem;
            color: #ffa726;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .car-price, .friend-amount {
            color: #4ecdc4;
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .car-description, .friend-description {
            font-size: 0.95rem;
            margin-top: 8px;
            color: #ccc;
            font-style: italic;
            line-height: 1.4;
        }
        
        .friend-character {
            color: #ff6b6b;
            font-size: 0.85rem;
            margin-top: 5px;
            font-weight: bold;
        }
        
        .hidden {
            display: none;
        }
        
        .achievement {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(50, 50, 50, 0.9));
            padding: 15px 20px;
            border-radius: 12px;
            border-left: 5px solid gold;
            animation: slideInRight 0.5s ease, slideOutRight 0.5s ease 3s forwards;
            z-index: 300;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            max-width: 300px;
        }
        
        .achievement-icon {
            color: gold;
            margin-right: 10px;
            font-size: 1.5rem;
        }
        
        .sound-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 300;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }
        
        .sound-toggle:hover {
            transform: scale(1.1);
            background: rgba(0, 0, 0, 0.9);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .modal-close {
            background: #ff6b6b;
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .modal-close:hover {
            transform: scale(1.1);
            background: #ff5252;
        }
        
        .option-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #ff6b6b;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        
        .risk-high {
            background: #ff416c;
        }
        
        .risk-medium {
            background: #ff9d00;
        }
        
        .risk-low {
            background: #24c484;
        }
        
        .event-icon {
            margin-right: 8px;
            font-size: 1.2rem;
        }
        
        .no-options {
            text-align: center;
            padding: 20px;
            color: #ccc;
            font-style: italic;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideOutRight {
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        @keyframes borderRotate {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (min-width: 768px) {
            .container {
                max-width: 500px;
            }
            
            .actions {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .action-btn {
                min-height: 100px;
                font-size: 1rem;
            }
            
            .modal-content {
                max-width: 500px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üê∑ –°—Ç–µ–ø–∞: –î–æ–ª–≥–æ–≤–∞—è —è–º–∞ 2.0</h1>
            <div class="stats">
                <div class="stat-item">
                    –î–µ–Ω—å <div class="stat-value" id="day">1</div>
                </div>
                <div class="stat-item">
                    –î–µ–Ω—å–≥–∏ <div class="stat-value" id="money">5 000 ‚ÇΩ</div>
                </div>
                <div class="stat-item">
                    –î–æ–ª–≥ <div class="stat-value" id="debt">100 000 ‚ÇΩ</div>
                </div>
            </div>
            <div class="progress-container">
                <div>–°—Ç—Ä–µ—Å—Å: <span id="stress">0</span>/100</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="stress-bar" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <div class="character-container">
            <div class="stepa floating">üßç</div>
            <div id="phone-indicator" class="phone-ringing hidden">üìû</div>
        </div>
        
        <div class="actions">
            <button class="action-btn" onclick="work()">
                <span class="action-icon">üíº</span>
                <span>–†–∞–±–æ—Ç–∞—Ç—å</span>
            </button>
            <button class="action-btn" onclick="showFriendsModal()">
                <span class="action-icon">üë•</span>
                <span>–ó–∞–Ω—è—Ç—å —É –¥—Ä—É–∑–µ–π</span>
            </button>
            <button class="action-btn" onclick="findJob()">
                <span class="action-icon">üîç</span>
                <span>–ù–∞–π—Ç–∏ —Ä–∞–±–æ—Ç—É</span>
            </button>
            <button class="action-btn" onclick="showCarSelection()">
                <span class="action-icon">üöó</span>
                <span>–ö—É–ø–∏—Ç—å –º–∞—à–∏–Ω—É</span>
            </button>
            <button class="action-btn" onclick="relieveStress()">
                <span class="action-icon">üçª</span>
                <span>–°–Ω—è—Ç—å —Å—Ç—Ä–µ—Å—Å</span>
            </button>
            <button class="action-btn" onclick="escapeCity()">
                <span class="action-icon">üèÉ</span>
                <span>–£–µ—Ö–∞—Ç—å –∏–∑ –ö—É—Ä—Å–∫–∞</span>
            </button>
            <button class="action-btn" onclick="payDebt()">
                <span class="action-icon">üí∞</span>
                <span>–û—Ç–¥–∞—Ç—å –¥–æ–ª–≥</span>
            </button>
            <button class="action-btn" onclick="takeLoan()">
                <span class="action-icon">üè¶</span>
                <span>–í–∑—è—Ç—å –∫—Ä–µ–¥–∏—Ç</span>
            </button>
            <button class="action-btn" onclick="invest()">
                <span class="action-icon">üìà</span>
                <span>–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
            </button>
        </div>
        
        <div class="events" id="events">
            <div class="event event-info">
                <span class="event-icon">üì¢</span>
                –î–µ–Ω—å 1: –°—Ç–µ–ø–∞ –ø—Ä–æ—Å–Ω—É–ª—Å—è –≤ —Ö–æ–ª–æ–¥–Ω–æ–º –ø–æ—Ç—É. –î–æ–ª–≥ 100–∫, –∞ –¥–µ–Ω–µ–≥ –≤—Å–µ–≥–æ 5–∫. –ñ–∏–∑–Ω—å - –±–æ–ª—å!
            </div>
        </div>
    </div>
    
    <div id="game-over" class="game-over hidden">
        <h2 id="game-result">–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</h2>
        <p id="game-message"></p>
        <button class="restart-btn" onclick="restartGame()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
    </div>

    <div id="car-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üöó –í—ã–±–µ—Ä–∏ —Ç–∞—á–∫—É (—Ç–æ–ª—å–∫–æ –±/—É, –µ–ø—Ç–∞!)</h3>
                <button class="modal-close" onclick="hideCarModal()">‚úï</button>
            </div>
            <div id="car-options">
                <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –º–∞—à–∏–Ω –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
    </div>

    <div id="stress-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üçª –°–Ω—è—Ç—å —Å—Ç—Ä–µ—Å—Å (–∞ —Ç–æ —â–∞—Å –ª–æ–ø–Ω–µ—à—å!)</h3>
                <button class="modal-close" onclick="hideStressModal()">‚úï</button>
            </div>
            <div id="stress-options">
                <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã —Å–Ω—è—Ç–∏—è —Å—Ç—Ä–µ—Å—Å–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
    </div>
    
    <div id="friends-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üë• –ó–∞–Ω—è—Ç—å —É –¥—Ä—É–∑–µ–π (–∏–ª–∏ –≤—Ä–∞–≥–æ–≤?)</h3>
                <button class="modal-close" onclick="hideFriendsModal()">‚úï</button>
            </div>
            <div id="friends-options">
                <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –¥—Ä—É–∑–µ–π –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
    </div>
    
    <div id="achievement" class="achievement hidden">
        <span class="achievement-icon">üèÜ</span>
        <span id="achievement-text"></span>
    </div>
    
    <div class="sound-toggle" onclick="toggleSound()" id="sound-toggle">üîä</div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.setText("–û–±–Ω–æ–≤–∏—Ç—å –∏–≥—Ä—É").show();
        
        // –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let soundEnabled = true;
        
        function playSound(frequency, duration, type = 'sine') {
            if (!soundEnabled) return;
            
            try {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = type;
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            } catch (e) {
                console.log("Audio error:", e);
            }
        }
        
        function playSuccessSound() {
            playSound(523.25, 0.3); // –î–æ
            setTimeout(() => playSound(659.25, 0.3), 100); // –ú–∏
            setTimeout(() => playSound(783.99, 0.5), 200); // –°–æ–ª—å
        }
        
        function playFailureSound() {
            playSound(220, 0.5, 'square');
            setTimeout(() => playSound(196, 0.5, 'square'), 200);
        }
        
        function playMoneySound() {
            for (let i = 0; i < 5; i++) {
                setTimeout(() => playSound(800 + i * 100, 0.1), i * 50);
            }
        }
        
        function playStressSound() {
            playSound(150, 0.5, 'sawtooth');
            setTimeout(() => playSound(120, 0.5, 'sawtooth'), 300);
        }
        
        function playPhoneSound() {
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    playSound(800, 0.1);
                    setTimeout(() => playSound(600, 0.1), 100);
                }, i * 500);
            }
        }
        
        function playGameOverSound() {
            for (let i = 0; i < 8; i++) {
                setTimeout(() => playSound(200 - i * 20, 0.2, 'square'), i * 150);
            }
        }
        
        function playVictorySound() {
            const notes = [523.25, 659.25, 783.99, 1046.50, 1318.51, 1567.98];
            notes.forEach((note, i) => {
                setTimeout(() => playSound(note, 0.3), i * 150);
            });
        }
        
        function toggleSound() {
            soundEnabled = !soundEnabled;
            document.getElementById('sound-toggle').textContent = soundEnabled ? 'üîä' : 'üîá';
            
            if (soundEnabled && audioContext.state === 'suspended') {
                audioContext.resume();
            }
        }
        
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gameState = {
            day: 1,
            totalDays: 365,
            money: 5000,
            debt: 100000,
            targetMoney: 100000,
            hasCar: false,
            carModel: "",
            hasJob: false,
            currentCity: "–ö—É—Ä—Å–∫",
            isAlive: true,
            gameOver: false,
            stressLevel: 0,
            maxStress: 100,
            isBeaten: false,
            phoneRinging: false,
            achievements: [],
            friends: [
                {name: "–í–∞—Å—å–∫–∞", character: "—â–µ–¥—Ä—ã–π", description: "–°—Ç–∞—Ä—ã–π –¥—Ä—É–≥, –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å, –Ω–æ –µ—Å–ª–∏ –Ω–µ –≤–µ—Ä–Ω–µ—à—å - –ø–æ –ø–æ—á–∫–∞–º –ø–æ–ª—É—á–∏—à—å", maxLoan: 15000, alreadyBorrowed: false, successChance: 0.7},
                {name: "–ü–µ—Ç—Ä–æ", character: "–∂–∞–¥–Ω—ã–π", description: "–°—á–∏—Ç–∞–µ—Ç –∫–∞–∂–¥—É—é –∫–æ–ø–µ–π–∫—É. –í –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑ –∑–∞–Ω—è–ª 1000 —Ä—É–±–ª–µ–π –∏ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª 1100 –æ–±—Ä–∞—Ç–Ω–æ —á–µ—Ä–µ–∑ –¥–µ–Ω—å", maxLoan: 5000, alreadyBorrowed: false, successChance: 0.3},
                {name: "–°–µ–º—ë–Ω", character: "–¥–æ–±—Ä—ã–π", description: "–í—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å, –Ω–æ –µ–≥–æ –∂–µ–Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ä—ë—Ç, —á—Ç–æ –æ–Ω –ª–æ—Ö", maxLoan: 10000, alreadyBorrowed: false, successChance: 0.8},
                {name: "–ì—Ä–∏—à–∞", character: "–±–∞–Ω–¥–∏—Ç", description: "–û–¥–æ–ª–∂–∏—Ç, –Ω–æ –ø–æ—Ç–æ–º –ø—Ä–∏–π–¥–µ—Ç—Å—è –æ—Ç–±–∏–≤–∞—Ç—å—Å—è. –ú–æ–∂–µ—Ç –∏ –Ω–æ–≥–æ–π –ø–æ–¥–¥–∞—Ç—å –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É", maxLoan: 20000, alreadyBorrowed: false, successChance: 0.9},
                {name: "–ö–æ–ª—è", character: "–∞–ª–∫–∞—à", description: "–°–∞–º –≤–µ—á–Ω–æ –≤ –¥–æ–ª–≥–∞—Ö –∫–∞–∫ –≤ —à–µ–ª–∫–∞—Ö. –ú–æ–∂–µ—Ç –¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∞—à–µ–ª –∑–∞–Ω–∞—á–∫—É", maxLoan: 3000, alreadyBorrowed: false, successChance: 0.2},
                {name: "–ú–∏—à–∞", character: "–±–∏–∑–Ω–µ—Å–º–µ–Ω", description: "–ó–∞–Ω—è—Ç—å –º–æ–∂–Ω–æ, –Ω–æ –ø–æ–¥ –ø—Ä–æ—Ü–µ–Ω—Ç—ã. –ò —Å —Ä–∞—Å–ø–∏—Å–∫–æ–π —É –Ω–æ—Ç–∞—Ä–∏—É—Å–∞", maxLoan: 25000, alreadyBorrowed: false, successChance: 0.6},
                {name: "–ê–Ω—Ç–æ–Ω", character: "—Å—Ç—É–¥–µ–Ω—Ç", description: "–î–µ–Ω–µ–≥ –Ω–µ—Ç, –Ω–æ –¥–µ—Ä–∂–∏—Å—å. –°–∞–º –∂–∏–≤–µ—Ç –Ω–∞ –¥–æ—à–∏—Ä–∞–∫–µ –∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ", maxLoan: 2000, alreadyBorrowed: false, successChance: 0.1},
                {name: "–î–∏–º–∞", character: "—Ä–∞—Ü–∏–æ–Ω–∞–ª–∏—Å—Ç", description: "–ü–æ–ø—Ä–æ—Å–∏—Ç –±–∏–∑–Ω–µ—Å-–ø–ª–∞–Ω –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞. –ó–∞–¥–æ–ª–±–∞–µ—Ç –≤–æ–ø—Ä–æ—Å–∞–º–∏", maxLoan: 8000, alreadyBorrowed: false, successChance: 0.5},
                {name: "–ñ–µ–Ω—è", character: "–≤–µ–∑—É–Ω—á–∏–∫", description: "–ú–æ–∂–µ—Ç –¥–∞—Ç—å –±–æ–ª—å—à–µ, —á–µ–º –ø—Ä–æ—Å–∏—à—å, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–∏–≥—Ä–∞–µ—Ç –≤ –ø–æ–∫–µ—Ä", maxLoan: 12000, alreadyBorrowed: false, successChance: 0.4},
                {name: "–°–ª–∞–≤–∞", character: "—Ñ–∏–Ω–∞–Ω—Å–∏—Å—Ç", description: "–î–∞—Å—Ç –≤ –¥–æ–ª–≥, –Ω–æ —Å –∂–µ—Å—Ç–∫–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏. –í–µ—Ä–Ω–µ—à—å –Ω–µ –≤–æ–≤—Ä–µ–º—è - –∑–∞–ª–æ–∂–∏—Ç —Ç–≤–æ—é –ø–æ—á–∫—É", maxLoan: 18000, alreadyBorrowed: false, successChance: 0.6}
            ],
            creditors: [
                {name: "–ë–∞–Ω–∫ '–ö—É—Ä—Å–∫–§–∏–Ω–∞–Ω—Å'", type: "–±–∞–Ω–∫", amount: 50000, daysUntilCall: 30, aggressiveness: 0.3},
                {name: "–ú–∏–∫—Ä–æ—Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è '–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–Ω—å–≥–∏'", type: "–º—Ñ–æ", amount: 20000, daysUntilCall: 15, aggressiveness: 0.7},
                {name: "–ë—Ä–∞—Ç–æ–∫ –°–µ—Ä—ë–≥–∞", type: "–±—Ä–∞—Ç–æ–∫", amount: 30000, daysUntilCall: 10, aggressiveness: 0.9}
            ],
            cars: [
                {name: "–õ–∞–¥–∞ –ì—Ä–∞–Ω—Ç–∞", price: 35000, scamChance: 0.85, description: "–¶—ã–≥–∞–Ω –∫–ª—è–Ω–µ—Ç—Å—è, —á—Ç–æ –º–∞—à–∏–Ω–∞ —Ç–æ–ª—å–∫–æ —Å –∑–∞–≤–æ–¥–∞, –Ω–æ –ø–∞—Ö–Ω–µ—Ç –æ–Ω–∞ –∫–∞–∫ –±—É–¥—Ç–æ –µ–µ —Å–æ–±–∏—Ä–∞–ª–∏ –≤ –≥–∞—Ä–∞–∂–µ —É –∞–ª–∫–∞—à–∞"},
                {name: "–ñ–∏–≥—É–ª–∏", price: 15000, scamChance: 0.5, description: "–î–µ–¥—É—à–∫–∞ –æ–¥–∏–Ω –≤–ª–∞–¥–µ–ª, –Ω–µ –±–∏—Ç–∞, –Ω–µ –∫—Ä–∞—à–µ–Ω–∞. –ü—Ä–∞–≤–¥–∞, –¥–µ–¥—É—à–∫–∞ –±—ã–ª —Å–ª–µ–ø–æ–π –∏ –≥–ª—É—Ö–æ–π, —Ç–∞–∫ —á—Ç–æ –º–æ–≥ –∏ –Ω–µ –∑–∞–º–µ—Ç–∏—Ç—å"},
                {name: "–ú–æ—Å–∫–≤–∏—á 412", price: 8000, scamChance: 0.3, description: "–†–∞—Ä–∏—Ç–µ—Ç, –Ω–æ –µ–∑–¥–∏—Ç (–∏–Ω–æ–≥–¥–∞). –ï—Å–ª–∏ –ø–æ–≤–µ–∑—ë—Ç, –¥–æ–µ–¥–µ—à—å –¥–æ –¥–æ–º–∞, –∞ –Ω–µ –¥–æ –∫–ª–∞–¥–±–∏—â–∞"},
                {name: "–¢–∞–≤—Ä–∏—è", price: 12000, scamChance: 0.6, description: "–£–∫—Ä–∞–∏–Ω—Å–∫–∞—è –º–µ—á—Ç–∞, –Ω–æ —Å –ø—Ä–æ–±–µ–≥–æ–º –¥–æ –õ—É–Ω—ã –∏ –æ–±—Ä–∞—Ç–Ω–æ. –ö–æ–Ω—Å–µ—Ä–≤–Ω–∞—è –±–∞–Ω–∫–∞ –Ω–∞ –∫–æ–ª—ë—Å–∞—Ö"},
                {name: "–í–æ–ª–≥–∞", price: 60000, scamChance: 0.9, description: "–¶—ã–≥–∞–Ω –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —ç—Ç–æ –º–∞—à–∏–Ω–∞ –¥–ª—è –ø–∞—Ñ–æ—Å–∞, –Ω–æ –ø–∞—Ñ–æ—Å –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –¥–æ—Ä–æ–∂–µ. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —É–≥–Ω–∞–Ω–∞—è"},
                {name: "–ó–∞–ø–æ—Ä–æ–∂–µ—Ü—å", price: 5000, scamChance: 0.1, description: "–£—à–∞—Ç–∞–Ω—ã–π —Ç–∞–∑–∏–∫, –Ω–æ –∑–∞—Ç–æ —Å–≤–æ–π. –ù–∞ —ç—Ç–æ–º —Ö–ª–∞–º–µ —Ç–µ–±—è —Ç–æ—á–Ω–æ –Ω–µ –ø—Ä–∏–º—É—Ç –∑–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ"},
                {name: "–ß–∞–π–∫–∞", price: 90000, scamChance: 0.95, description: "–¶—ã–≥–∞–Ω –∫–ª—è–Ω—ë—Ç—Å—è, —á—Ç–æ –Ω–∞ —ç—Ç–æ–π –º–∞—à–∏–Ω–µ –µ–∑–¥–∏–ª —Å–∞–º –ë—Ä–µ–∂–Ω–µ–≤. –ò –ø–æ—Ö–æ–∂–µ, –æ–Ω–∞ —Å —Ç–µ—Ö –ø–æ—Ä –∏ –Ω–µ —Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∞—Å—å"}
            ],
            stressReliefOptions: [
                {name: "–ü–∏–≤–æ –≤ –±–∞—Ä–µ", cost: 500, stressRelief: 10, description: "–ü–∞—Ä—É –∫—Ä—É–∂–µ—á–µ–∫ –ø–æ–º–æ–≥—É—Ç –∑–∞–±—ã—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö. –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã—Ö, –µ—Å–ª–∏ –ø–æ–¥–µ—Ä–µ—à—å—Å—è"},
                {name: "–í–∏—Å–∫–∏ –¥–æ–º–∞", cost: 2000, stressRelief: 25, description: "–ë—É—Ç—ã–ª–æ—á–∫–∞ —Ö–æ—Ä–æ—à–µ–≥–æ –≤–∏—Å–∫–∏ - –ª—É—á—à–µ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ. –ü—Ä–æ—Å–Ω–µ—à—å—Å—è —Å –ø–æ—Ö–º–µ–ª—å–µ–º –∏ –±–µ–∑ –¥–µ–Ω–µ–≥"},
                {name: "–ú–∞—Å—Å–∞–∂", cost: 5000, stressRelief: 40, description: "–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂ —Å–Ω–∏–º–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ. –ï—Å–ª–∏ –º–∞—Å—Å–∞–∂–∏—Å—Ç–∫–∞ –Ω–µ –æ–∫–∞–∂–µ—Ç—Å—è —Ç—Ä–∞–Ω—Å–æ–º"},
                {name: "–ü–æ–µ–∑–¥–∫–∞ –Ω–∞ –º–æ—Ä–µ", cost: 15000, stressRelief: 70, description: "–ù–µ–¥–µ–ª—è –æ—Ç–¥—ã—Ö–∞ –Ω–∞ –º–æ—Ä–µ –≤–µ—Ä–Ω–µ—Ç –≤–∫—É—Å –∫ –∂–∏–∑–Ω–∏. –ò —É–≤–µ–ª–∏—á–∏—Ç –¥–æ–ª–≥ –Ω–∞ 15–∫"},
                {name: "–î–µ–≤—É—à–∫–∞ –ø–æ –≤—ã–∑–æ–≤—É", cost: 10000, stressRelief: 50, description: "–ù–∞ —á–∞—Å –∑–∞–±—É–¥–µ—à—å –æ –¥–æ–ª–≥–∞—Ö. –ê –ø–æ—Ç–æ–º –µ—â—ë –∏ –≤–µ–Ω–µ—Ä–∏—á–µ—Å–∫–∏–µ –±–æ–ª–µ–∑–Ω–∏ –ª–µ—á–∏—Ç—å"},
                {name: "–ê–ª–∫–æ–≥–æ–ª—å–Ω—ã–π –∑–∞–ø–æ–π", cost: 3000, stressRelief: 60, description: "–ù–∞ —Ç—Ä–æ–µ —Å—É—Ç–æ–∫ –≤—ã—Ä—É–±–∏—à—å—Å—è. –ü—Ä–æ—Å–Ω–µ—à—å—Å—è –≤ –≤—ã—Ç—Ä–µ–∑–≤–∏—Ç–µ–ª–µ –±–µ–∑ —à—Ç–∞–Ω–æ–≤"}
            ],
            events: []
        };

        // –§—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã
        function addEvent(message, type = "info") {
            const eventsDiv = document.getElementById('events');
            const eventElement = document.createElement('div');
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–∫–æ–Ω–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è
            let icon = "üì¢";
            if (type === "success") icon = "‚úÖ";
            else if (type === "danger") icon = "‚ùå";
            else if (type === "warning") icon = "‚ö†Ô∏è";
            
            eventElement.className = `event event-${type}`;
            eventElement.innerHTML = `<span class="event-icon">${icon}</span>${message}`;
            eventsDiv.prepend(eventElement);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
            gameState.events.push({day: gameState.day, message, type});
            
            // –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –∫ –Ω–æ–≤–æ–º—É —Å–æ–±—ã—Ç–∏—é
            eventsDiv.scrollTop = 0;
            
            // –ó–≤—É–∫ —Å–æ–±—ã—Ç–∏—è
            if (type === "success") {
                playSuccessSound();
            } else if (type === "danger") {
                playFailureSound();
            }
        }

        function addAchievement(title) {
            if (gameState.achievements.includes(title)) return;
            
            gameState.achievements.push(title);
            const achievementDiv = document.getElementById('achievement');
            const achievementText = document.getElementById('achievement-text');
            
            achievementText.textContent = title;
            achievementDiv.classList.remove('hidden');
            
            playSuccessSound();
            
            setTimeout(() => {
                achievementDiv.classList.add('hidden');
            }, 3000);
        }

        function updateUI() {
            document.getElementById('day').textContent = gameState.day;
            document.getElementById('money').textContent = formatMoney(gameState.money);
            document.getElementById('debt').textContent = formatMoney(gameState.debt);
            document.getElementById('stress').textContent = gameState.stressLevel;
            document.getElementById('stress-bar').style.width = `${(gameState.stressLevel / gameState.maxStress) * 100}%`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –°—Ç–µ–ø—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è
            const stepaElement = document.querySelector('.stepa');
            const phoneIndicator = document.getElementById('phone-indicator');
            
            if (gameState.phoneRinging) {
                phoneIndicator.classList.remove('hidden');
                playPhoneSound();
            } else {
                phoneIndicator.classList.add('hidden');
            }
            
            if (gameState.isBeaten) {
                stepaElement.classList.add('beaten');
                stepaElement.classList.remove('happy', 'stressed', 'floating');
                setTimeout(() => {
                    stepaElement.classList.remove('beaten');
                    gameState.isBeaten = false;
                }, 1000);
            } else if (gameState.stressLevel > 70) {
                stepaElement.classList.add('stressed');
                stepaElement.classList.remove('happy', 'floating');
            } else if (gameState.stressLevel < 30 && gameState.debt < 50000) {
                stepaElement.classList.add('happy');
                stepaElement.classList.remove('stressed');
                stepaElement.classList.add('floating');
            } else {
                stepaElement.classList.remove('stressed', 'happy');
                stepaElement.classList.add('floating');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            checkAchievements();
        }

        function formatMoney(amount) {
            return new Intl.NumberFormat('ru-RU').format(amount) + ' ‚ÇΩ';
        }

        function work() {
            if (gameState.gameOver) return;
            
            let salary = 0;
            if (gameState.hasJob) {
                salary = Math.floor(Math.random() * 5000) + 3000;
                addEvent(`üíº –ü–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ. –ó–∞—Ä–∞–±–æ—Ç–∞–ª: ${formatMoney(salary)}`, "success");
            } else {
                salary = Math.floor(Math.random() * 2000) + 1000;
                addEvent(`üî® –í–∫–∞–ª—ã–≤–∞–ª –∫–∞–∫ —á–µ—Ä–Ω–æ—Ä–∞–±–æ—á–∏–π. –ó–∞—Ä–∞–±–æ—Ç–∞–ª: ${formatMoney(salary)}`, "info");
            }
            
            gameState.money += salary;
            playMoneySound();
            nextDay();
        }

        function showFriendsModal() {
            if (gameState.gameOver) return;
            
            const friendsOptionsDiv = document.getElementById('friends-options');
            friendsOptionsDiv.innerHTML = '';
            
            const availableFriends = gameState.friends.filter(f => !f.alreadyBorrowed);
            
            if (availableFriends.length === 0) {
                friendsOptionsDiv.innerHTML = '<div class="no-options">–í—Å–µ –¥—Ä—É–∑—å—è —É–∂–µ –¥–∞–ª–∏ –≤ –¥–æ–ª–≥. –ë–æ–ª—å—à–µ –Ω–∏–∫—Ç–æ –Ω–µ –≤–µ—Ä–∏—Ç, –±–ª—è–¥—å!</div>';
            } else {
                availableFriends.forEach(friend => {
                    const friendOption = document.createElement('div');
                    friendOption.className = 'friend-option';
                    
                    let riskClass = 'risk-medium';
                    let riskText = '–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫';
                    if (friend.successChance > 0.7) {
                        riskClass = 'risk-low';
                        riskText = '–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫';
                    }
                    if (friend.successChance < 0.4) {
                        riskClass = 'risk-high';
                        riskText = '–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫';
                    }
                    
                    friendOption.innerHTML = `
                        <div class="option-badge ${riskClass}">${riskText}</div>
                        <div class="friend-name">${friend.name}</div>
                        <div class="friend-character">–•–∞—Ä–∞–∫—Ç–µ—Ä: ${friend.character}</div>
                        <div class="friend-amount">–ú–æ–∂–µ—Ç –¥–∞—Ç—å –¥–æ: ${formatMoney(friend.maxLoan)}</div>
                        <div class="friend-description">${friend.description}</div>
                    `;
                    friendOption.onclick = () => borrowFromFriend(friend);
                    friendsOptionsDiv.appendChild(friendOption);
                });
            }
            
            document.getElementById('friends-modal').classList.remove('hidden');
        }

        function hideFriendsModal() {
            document.getElementById('friends-modal').classList.add('hidden');
        }

        function borrowFromFriend(friend) {
            if (gameState.gameOver) return;
            
            const successChance = Math.random();
            
            if (successChance <= friend.successChance) {
                const amount = Math.floor(Math.random() * friend.maxLoan * 0.5) + friend.maxLoan * 0.5;
                gameState.money += amount;
                friend.alreadyBorrowed = true;
                
                const reactions = [
                    "–ö—Ä–∞—Å–∞–≤–∞! –í–æ–∑—å–º–∏, –Ω–æ –≤–µ—Ä–Ω–∏ –≤–æ–≤—Ä–µ–º—è, –∞ —Ç–æ —è —Ç–µ–±–µ –µ–±–∞–ª—å–Ω–∏–∫ –Ω–∞–±—å—é!",
                    "–î–µ—Ä–∂–∏, –±—Ä–∞—Ç–∞–Ω! –í—ã—Ä—É—á–∞–π –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –º–µ–Ω—è, —Å—É–∫–∞!",
                    "–ù–∞, —Ç–æ–ª—å–∫–æ –Ω–µ –ø—Ä–æ–¥—É–π –≤—Å—ë –≤ –∫–∞–∑–∏–Ω–æ, –¥–æ–ª–±–æ—ë–±!",
                    "–û–¥–æ–ª–∂—É, –Ω–æ –ø–æ–º–Ω–∏ - –¥–æ–ª–≥ –ø–ª–∞—Ç–µ–∂–æ–º –∫—Ä–∞—Å–µ–Ω, –µ–ø—Ç–∞!",
                    "–ó–∞–±–∏—Ä–∞–π, –Ω–æ –µ—Å–ª–∏ –Ω–µ –≤–µ—Ä–Ω–µ—à—å - —Å–∞–º –∑–Ω–∞–µ—à—å, –∫—É–¥–∞ —è —Ç–µ–±—è –ø–æ—à–ª—é..."
                ];
                
                addEvent(`‚úÖ ${friend.name} –æ–¥–æ–ª–∂–∏–ª ${formatMoney(amount)}. ${reactions[Math.floor(Math.random() * reactions.length)]}`, "success");
                decreaseStress(15);
                playMoneySound();
            } else {
                const rejections = [
                    "–°–∞–º –≤ –¥–æ–ª–≥–∞—Ö –∫–∞–∫ –≤ —à–µ–ª–∫–∞—Ö, –ø–æ—à—ë–ª –Ω–∞ —Ö—É–π!",
                    "–ò–¥–∏ —Ä–∞–±–æ—Ç–∞–π, —Ö–∞–ª—è–≤—â–∏–∫ –µ–±–∞–Ω—ã–π!",
                    "–¢—ã –º–Ω–µ –µ—â—ë —Å –ø—Ä–æ—à–ª–æ–≥–æ —Ä–∞–∑–∞ –¥–æ–ª–∂–µ–Ω, –º—É–¥–∏–ª–∞!",
                    "–î–µ–Ω–µ–≥ –Ω–µ—Ç, –Ω–æ —Ç—ã –¥–µ—Ä–∂–∏—Å—å, –ª–æ—Ö!",
                    "–ù–∞ —Ö—É–π –ø–æ—à—ë–ª, –°—Ç–µ–ø–∞!",
                    "–í –Ω–∞—Ç—É—Ä–µ –Ω–µ—Ç –±–∞–±–ª–∞, –±—Ä–∞—Ç–∞–Ω! –°–∞–º–æ–º—É –∂—Ä–∞—Ç—å –Ω–µ—á–µ–≥–æ!"
                ];
                
                addEvent(`‚ùå ${friend.name} –ø–æ—Å–ª–∞–ª —Ç–µ–±—è: "${rejections[Math.floor(Math.random() * rejections.length)]}"`, "danger");
                increaseStress(20);
                playFailureSound();
            }
            
            hideFriendsModal();
            nextDay();
        }

        function findJob() {
            if (gameState.gameOver) return;
            
            if (gameState.hasJob) {
                addEvent("üíº –£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å —Ä–∞–±–æ—Ç–∞, –Ω–µ –∂–∞–¥–Ω–∏—á–∞–π, –µ–ø—Ç–∞!", "warning");
                nextDay();
                return;
            }
            
            const successChance = Math.random();
            if (successChance > 0.4) {
                gameState.hasJob = true;
                addEvent("üéâ –£—Ä–∞! –ù–∞—à—ë–ª —Ä–∞–±–æ—Ç—É –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞ –≤ '–ö—É—Ä—Å–∫-–ø–∏—Ü—Ü–µ'. –¢–µ–ø–µ—Ä—å –∑–∞—Ä–ø–ª–∞—Ç–∞ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ!", "success");
                decreaseStress(20);
                playSuccessSound();
            } else {
                addEvent("üòû –ù–∏–∫—Ç–æ –Ω–µ —Ö–æ—á–µ—Ç –±—Ä–∞—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É –¥–æ–ª–∂–Ω–∏–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ –∑–∞–≤—Ç—Ä–∞, –ª—É–∑–µ—Ä.", "danger");
                increaseStress(10);
                playFailureSound();
            }
            nextDay();
        }

        function showCarSelection() {
            if (gameState.gameOver) return;
            
            if (gameState.hasCar) {
                addEvent(`üöó –£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å ${gameState.carModel}! –ù–µ –∂–∞–¥–Ω–∏—á–∞–π, –º—É–¥–∞–∫!`, "warning");
                return;
            }

            const carOptionsDiv = document.getElementById('car-options');
            carOptionsDiv.innerHTML = '';
            
            gameState.cars.forEach(car => {
                const carOption = document.createElement('div');
                carOption.className = 'car-option';
                
                let riskClass = 'risk-medium';
                let riskText = '–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫';
                if (car.scamChance > 0.7) {
                    riskClass = 'risk-high';
                    riskText = '–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫';
                }
                if (car.scamChance < 0.4) {
                    riskClass = 'risk-low';
                    riskText = '–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫';
                }
                
                carOption.innerHTML = `
                    <div class="option-badge ${riskClass}">${riskText}</div>
                    <div class="car-name">${car.name}</div>
                    <div class="car-price">–¶–µ–Ω–∞: ${formatMoney(car.price)}</div>
                    <div class="car-description">${car.description}</div>
                `;
                carOption.onclick = () => buyCar(car);
                carOptionsDiv.appendChild(carOption);
            });
            
            document.getElementById('car-modal').classList.remove('hidden');
        }

        function hideCarModal() {
            document.getElementById('car-modal').classList.add('hidden');
        }

        function buyCar(car) {
            if (gameState.gameOver) return;
            
            if (gameState.money < car.price) {
                addEvent(`ü§° –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –±–∞–±–ª–∞ –Ω–∞ ${car.name}! –ù–∞–∫–æ–ø–∏ —Ö–æ—Ç—è –±—ã ${formatMoney(car.price)}, –Ω–∏—â–µ–±—Ä–æ–¥.`, "danger");
                increaseStress(5);
                hideCarModal();
                playFailureSound();
                return;
            }

            gameState.money -= car.price;
            const scamChance = Math.random();
            
            if (scamChance > car.scamChance) {
                gameState.hasCar = true;
                gameState.carModel = car.name;
                
                const successMessages = [
                    `üéâ –ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! –ö—É–ø–∏–ª ${car.name} —É —Ü—ã–≥–∞–Ω–∞, –∏ –æ–Ω–∞ –ù–ï —Ä–∞–∑–≤–∞–ª–∏–ª–∞—Å—å! –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–¥—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–∞–∫—Å–∏—Å—Ç–æ–º.`,
                    `üî• –û—Ñ–∏–≥–µ–Ω–Ω–∞—è –ø–æ–∫—É–ø–∫–∞! ${car.name} –æ–∫–∞–∑–∞–ª–∞—Å—å –Ω–∞—Å—Ç–æ—è—â–µ–π –Ω–∞—Ö–æ–¥–∫–æ–π. –¶—ã–≥–∞–Ω —Å–µ–≥–æ–¥–Ω—è –±—ã–ª —á–µ—Å—Ç–µ–Ω!`,
                    `üöó –í–∞—É! ${car.name} –≤ –∏–¥–µ–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –¶—ã–≥–∞–Ω —Å–∫–∞–∑–∞–ª, —á—Ç–æ —Ç—ã –µ–º—É –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è, –ø–æ—ç—Ç–æ–º—É –Ω–µ —Å—Ç–∞–ª –Ω–∞—ë–±—ã–≤–∞—Ç—å.`
                ];
                
                addEvent(successMessages[Math.floor(Math.random() * successMessages.length)], "success");
                decreaseStress(25);
                playSuccessSound();
                
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥ –æ—Ç –º–∞—à–∏–Ω—ã
                if (gameState.day % 7 === 0) {
                    const taxiIncome = Math.floor(Math.random() * 3000) + 1000;
                    gameState.money += taxiIncome;
                    addEvent(`üöï –ü–æ–¥—Ä–∞–±–æ—Ç–∞–ª —Ç–∞–∫—Å–∏—Å—Ç–æ–º –Ω–∞ —Å–≤–æ–µ–π ${car.name}. –ó–∞—Ä–∞–±–æ—Ç–∞–ª: ${formatMoney(taxiIncome)}`, "success");
                }
            } else {
                const scams = [
                    `üí∏ –¶—ã–≥–∞–Ω –Ω–∞–µ–±–∞–ª! ${car.name} —Ä–∞–∑–≤–∞–ª–∏–ª–∞—Å—å —á–µ—Ä–µ–∑ 100 –º–µ—Ç—Ä–æ–≤. –ï–±–∏—Å—å —Ç–µ–ø–µ—Ä—å –≤ ${gameState.currentCity} –ø–µ—à–∫–æ–º, –ª–æ—Ö!`,
                    `ü¶ä –¶—ã–≥–∞–Ω –∏—Å—á–µ–∑ –≤–º–µ—Å—Ç–µ —Å —Ç–≤–æ–∏–º–∏ –¥–µ–Ω—å–≥–∞–º–∏. –ù–∞ –º–µ—Å—Ç–µ —Å—Ç–æ—è–Ω–∫–∏ —Ç–æ–ª—å–∫–æ –∫–ª–æ—á–æ–∫ —à–µ—Ä—Å—Ç–∏ –∏ –∑–∞–ø–∞—Ö –ª–∞–¥–∞–Ω–∞.`,
                    `üöì –û–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ ${car.name} –±—ã–ª–∞ —É–≥–Ω–∞–Ω–∞. –¢–µ–ø–µ—Ä—å –µ—â—ë –∏ —Å –º–µ–Ω—Ç–∞–º–∏ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –ø—Ä–∏–¥—ë—Ç—Å—è!`,
                    `üîß –ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ –≤—ã—è—Å–Ω–∏–ª–æ—Å—å, —á—Ç–æ –¥–≤–∏–≥–∞—Ç–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫—É—Ä–∏–Ω–æ–º –±—É–ª—å–æ–Ω–µ. –¶—ã–≥–∞–Ω —Å–∫–∞–∑–∞–ª '—Ç–∞–∫–∏–µ —Å–µ–π—á–∞—Å —Ç—Ä–µ–Ω–¥—ã'.`,
                    `üí© ${car.name} –æ–∫–∞–∑–∞–ª–∞—Å—å —Å–æ–±—Ä–∞–Ω–Ω–æ–π –∏–∑ —Ö–ª–∞–º–∞. –¶—ã–≥–∞–Ω –ø–æ—Å–º–µ—è–ª—Å—è –∏ —Å–∫–∞–∑–∞–ª: "–ù—É –±—ã–≤–∞–µ—Ç, –±—Ä–∞—Ç–∞–Ω!"`,
                    `üî• ${car.name} –∑–∞–≥–æ—Ä–µ–ª–∞—Å—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∂–µ –∑–∞–ø—É—Å–∫–µ. –¶—ã–≥–∞–Ω —É–∂–µ –≤ —Å–æ—Å–µ–¥–Ω–µ–π –æ–±–ª–∞—Å—Ç–∏.`
                ];
                
                addEvent(scams[Math.floor(Math.random() * scams.length)], "danger");
                increaseStress(30);
                playFailureSound();
            }
            
            hideCarModal();
            nextDay();
        }

        function relieveStress() {
            if (gameState.gameOver) return;
            
            const stressOptionsDiv = document.getElementById('stress-options');
            stressOptionsDiv.innerHTML = '';
            
            gameState.stressReliefOptions.forEach(option => {
                const stressOption = document.createElement('div');
                stressOption.className = 'stress-option';
                stressOption.innerHTML = `
                    <div class="car-name">${option.name}</div>
                    <div class="car-price">${formatMoney(option.cost)} | -${option.stressRelief} —Å—Ç—Ä–µ—Å—Å–∞</div>
                    <div class="car-description">${option.description}</div>
                `;
                stressOption.onclick = () => purchaseStressRelief(option);
                stressOptionsDiv.appendChild(stressOption);
            });
            
            document.getElementById('stress-modal').classList.remove('hidden');
        }

        function hideStressModal() {
            document.getElementById('stress-modal').classList.add('hidden');
        }

        function purchaseStressRelief(option) {
            if (gameState.money < option.cost) {
                addEvent(`üí∏ –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ ${option.name.toLowerCase()}! –ò–¥–∏ —Ä–∞–±–æ—Ç–∞–π, –Ω–∏—â–µ–±—Ä–æ–¥!`, "danger");
                hideStressModal();
                playFailureSound();
                return;
            }
            
            gameState.money -= option.cost;
            decreaseStress(option.stressRelief);
            
            const messages = [
                `üçª –°—Ç–µ–ø–∞ —Ö–æ—Ä–æ—à–æ –æ—Ç–¥–æ—Ö–Ω—É–ª: ${option.name.toLowerCase()}. –°—Ç—Ä–µ—Å—Å —É–º–µ–Ω—å—à–∏–ª—Å—è.`,
                `üòå ${option.name} –ø–æ–º–æ–≥–ª–∏ –∑–∞–±—ã—Ç—å –æ –¥–æ–ª–≥–∞—Ö. –ñ–∏–∑–Ω—å –Ω–∞–ª–∞–∂–∏–≤–∞–µ—Ç—Å—è!`,
                `üéä –û—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–Ω—è—Ç—å —Å—Ç—Ä–µ—Å—Å! ${option.name} - —ç—Ç–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ.`
            ];
            
            addEvent(messages[Math.floor(Math.random() * messages.length)], "success");
            hideStressModal();
            playSuccessSound();
            nextDay();
        }

        function escapeCity() {
            if (gameState.gameOver) return;
            
            if (gameState.currentCity !== "–ö—É—Ä—Å–∫") {
                addEvent("üèôÔ∏è –¢—ã —É–∂–µ —Å–≤–∞–ª–∏–ª –∏–∑ –ö—É—Ä—Å–∫–∞! –ö—É–¥–∞ –µ—â—ë –±–µ–∂–∞—Ç—å, –¥–µ–±–∏–ª?", "warning");
                nextDay();
                return;
            }
            
            if (gameState.money < 10000) {
                addEvent("üö´ –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –±–∞–±–ª–∞ –Ω–∞ –±–∏–ª–µ—Ç! –ù—É–∂–Ω–æ —Ö–æ—Ç—è –±—ã 10–∫ —Ä—É–±–ª–µ–π, –Ω–∏—â–µ–±—Ä–æ–¥.", "danger");
                increaseStress(5);
                nextDay();
                playFailureSound();
                return;
            }
            
            const cities = ["–í–æ—Ä–æ–Ω–µ–∂", "–ë–µ–ª–≥–æ—Ä–æ–¥", "–û—Ä—ë–ª", "–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥"];
            const newCity = cities[Math.floor(Math.random() * cities.length)];
            
            gameState.money -= 10000;
            gameState.currentCity = newCity;
            gameState.totalDays += 30; // –ö—Ä–µ–¥–∏—Ç–æ—Ä—ã –±—É–¥—É—Ç –∏—Å–∫–∞—Ç—å –¥–æ–ª—å—à–µ
            
            addEvent(`‚úàÔ∏è –°–≤–∞–ª–∏–ª –∏–∑ –ö—É—Ä—Å–∫–∞ –≤ ${newCity}! –ö—Ä–µ–¥–∏—Ç–æ—Ä—ã —Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç –∏—Å–∫–∞—Ç—å —Ç–µ–±—è –Ω–∞ 30 –¥–Ω–µ–π –¥–æ–ª—å—à–µ.`, "success");
            decreaseStress(40);
            playSuccessSound();
            nextDay();
        }

        function payDebt() {
            if (gameState.gameOver) return;
            
            if (gameState.money <= 0) {
                addEvent("üí∏ –ù–µ—Ç –¥–µ–Ω–µ–≥ –¥–ª—è –≤—ã–ø–ª–∞—Ç—ã –¥–æ–ª–≥–∞! –°–Ω–∞—á–∞–ª–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–π, –ª–µ–Ω—Ç—è–π –µ–±–∞–Ω—ã–π!", "danger");
                increaseStress(5);
                nextDay();
                playFailureSound();
                return;
            }
            
            const maxPayment = Math.min(gameState.money, gameState.debt);
            let payment = 0;
            
            if (gameState.debt > 50000) {
                payment = Math.min(maxPayment, 10000);
                addEvent(`üí∞ –û—Ç–¥–∞–ª ${formatMoney(payment)} –ø–æ –¥–æ–ª–≥—É. –ï—â—ë –±—ã —Å—Ç–æ–ª—å–∫–æ –∂–µ —Ä–∞–∑, –±–ª—è–¥—å...`, "info");
            } else if (gameState.debt > 10000) {
                payment = Math.min(maxPayment, 5000);
                addEvent(`üí∞ –ü–æ–≥–∞—Å–∏–ª ${formatMoney(payment)} –¥–æ–ª–≥–∞. –£–∂–µ –±–ª–∏–∑–∫–æ –∫ —Å–≤–æ–±–æ–¥–µ, –µ–ø—Ç–∞!`, "success");
            } else {
                payment = maxPayment;
                addEvent(`üí∞ –í—ã–ø–ª–∞—Ç–∏–ª –æ—Å—Ç–∞—Ç–æ–∫ –¥–æ–ª–≥–∞ ${formatMoney(payment)}! –ü–æ—á—Ç–∏ —Å–≤–æ–±–æ–¥–µ–Ω, —Å—É–∫–∞!`, "success");
            }
            
            gameState.money -= payment;
            gameState.debt -= payment;
            
            if (gameState.debt <= 0) {
                gameState.debt = 0;
                checkGameOver();
            }
            
            decreaseStress(15);
            playMoneySound();
            nextDay();
        }

        function takeLoan() {
            if (gameState.gameOver) return;
            
            if (gameState.debt > 50000) {
                addEvent("üö´ –£ —Ç–µ–±—è —É–∂–µ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –¥–æ–ª–≥! –ù–∏–∫—Ç–æ –Ω–µ –¥–∞—Å—Ç –µ—â—ë –∫—Ä–µ–¥–∏—Ç, –¥–æ–ª–±–æ—ë–±.", "danger");
                increaseStress(5);
                nextDay();
                playFailureSound();
                return;
            }
            
            const loanAmount = Math.floor(Math.random() * 20000) + 10000;
            gameState.money += loanAmount;
            gameState.debt += loanAmount * 1.5; // –ü—Ä–æ—Ü–µ–Ω—Ç—ã
            
            addEvent(`üè¶ –í–∑—è–ª –∫—Ä–µ–¥–∏—Ç ${formatMoney(loanAmount)}. –¢–µ–ø–µ—Ä—å –æ–±—â–∏–π –¥–æ–ª–≥: ${formatMoney(gameState.debt)}`, "warning");
            increaseStress(10);
            playMoneySound();
            nextDay();
        }

        function invest() {
            if (gameState.gameOver) return;
            
            if (gameState.money < 5000) {
                addEvent("üí∏ –î–ª—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 5000 —Ä—É–±–ª–µ–π, –Ω–∏—â–µ–±—Ä–æ–¥!", "danger");
                increaseStress(5);
                nextDay();
                playFailureSound();
                return;
            }
            
            const investment = Math.min(gameState.money, 20000);
            const successChance = Math.random();
            
            if (successChance > 0.6) {
                const profit = Math.floor(investment * (0.2 + Math.random() * 0.3));
                gameState.money += profit;
                addEvent(`üìà –£–¥–∞—á–Ω–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–ª ${formatMoney(investment)}! –ü—Ä–∏–±—ã–ª—å: ${formatMoney(profit)}`, "success");
                decreaseStress(10);
                playMoneySound();
            } else {
                const loss = Math.floor(investment * (0.1 + Math.random() * 0.2));
                gameState.money -= loss;
                addEvent(`üìâ –ù–µ—É–¥–∞—á–Ω–∞—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è ${formatMoney(investment)}. –ü–æ—Ç–µ—Ä—è–ª: ${formatMoney(loss)}`, "danger");
                increaseStress(15);
                playFailureSound();
            }
            
            nextDay();
        }

        function increaseStress(amount) {
            gameState.stressLevel = Math.min(gameState.stressLevel + amount, gameState.maxStress);
            if (amount > 5) playStressSound();
        }

        function decreaseStress(amount) {
            gameState.stressLevel = Math.max(gameState.stressLevel - amount, 0);
        }

        function nextDay() {
            if (gameState.gameOver) return;
            
            gameState.day++;
            
            // –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
            const randomEvent = Math.random();
            if (randomEvent < 0.3) {
                generateRandomEvent();
            }
            
            // –ö—Ä–µ–¥–∏—Ç–æ—Ä—ã –±–µ—Å–ø–æ–∫–æ—è—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ–ª–≥
            if (gameState.debt > 0) {
                gameState.creditors.forEach(creditor => {
                    creditor.daysUntilCall--;
                    if (creditor.daysUntilCall <= 0) {
                        harassByCreditor(creditor);
                        creditor.daysUntilCall = Math.floor(Math.random() * 20) + 10;
                    }
                });
            }
            
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—Ç—Ä–µ—Å—Å —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
            if (gameState.day % 5 === 0) {
                increaseStress(5);
            }
            
            // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ –æ—Ç –º–∞—à–∏–Ω—ã
            if (gameState.hasCar && gameState.day % 7 === 0) {
                const taxiIncome = Math.floor(Math.random() * 3000) + 1000;
                gameState.money += taxiIncome;
                addEvent(`üöï –ü–æ–¥—Ä–∞–±–æ—Ç–∞–ª —Ç–∞–∫—Å–∏—Å—Ç–æ–º –Ω–∞ —Å–≤–æ–µ–π ${gameState.carModel}. –ó–∞—Ä–∞–±–æ—Ç–∞–ª: ${formatMoney(taxiIncome)}`, "success");
            }
            
            updateUI();
            checkGameOver();
        }

        function generateRandomEvent() {
            const events = [
                {message: "üçÄ –ù–∞—à–µ–ª –Ω–∞ —É–ª–∏—Ü–µ 1000 —Ä—É–±–ª–µ–π! –ü–æ–≤–µ–∑–ª–æ, –±–ª—è–¥—å!", type: "success", money: 1000, stress: -5},
                {message: "üöì –ü–æ–ø–∞–ª –≤ –æ–±–ª–∞–≤—É –Ω–∞ –Ω–µ–ª–µ–≥–∞–ª–æ–≤! –ü—Ä–∏—à–ª–æ—Å—å –¥–∞—Ç—å –≤–∑—è—Ç–∫—É 2000 —Ä—É–±–ª–µ–π.", type: "danger", money: -2000, stress: 10},
                {message: "üéÅ –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è! –î—Ä—É–∑—å—è —Å–∫–∏–Ω—É–ª–∏—Å—å –∏ –ø–æ–¥–∞—Ä–∏–ª–∏ 5000 —Ä—É–±–ª–µ–π.", type: "success", money: 5000, stress: -10},
                {message: "üè• –ó–∞–±–æ–ª–µ–ª –≥—Ä–∏–ø–ø–æ–º. –ü—Ä–∏—à–ª–æ—Å—å –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å 3000 —Ä—É–±–ª–µ–π –Ω–∞ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞.", type: "warning", money: -3000, stress: 5},
                {message: "üí∏ –ù–∞ —Ç–µ–±—è –ø–æ–¥–∞–ª–∏ –≤ —Å—É–¥ –∑–∞ –Ω–µ—É–ø–ª–∞—Ç—É –¥–æ–ª–≥–∞! –î–æ–±–∞–≤–∏–ª–∏—Å—å —Å—É–¥–µ—Ä–Ω—ã–µ –∏–∑–¥–µ—Ä–∂–∫–∏ 10000 —Ä—É–±–ª–µ–π.", type: "danger", money: -10000, stress: 20},
                {message: "üìà –ù–∞—à–µ–ª –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É –Ω–∞ –æ–¥–∏–Ω –¥–µ–Ω—å. –ó–∞—Ä–∞–±–æ—Ç–∞–ª 2000 —Ä—É–±–ª–µ–π.", type: "success", money: 2000, stress: -5},
                {message: "üî• –í —Ç–≤–æ–µ–π –∫–≤–∞—Ä—Ç–∏—Ä–µ –≤ –ö—É—Ä—Å–∫–µ –ø—Ä–æ—Ä–≤–∞–ª–æ —Ç—Ä—É–±—É! –ü—Ä–∏—à–ª–æ—Å—å –∑–∞–ø–ª–∞—Ç–∏—Ç—å 5000 —Ä—É–±–ª–µ–π –∑–∞ —Ä–µ–º–æ–Ω—Ç.", type: "danger", money: -5000, stress: 15},
                {message: "üëÆ –ö—Ä–µ–¥–∏—Ç–æ—Ä—ã –≤–ª–æ–º–∏–ª–∏—Å—å –≤ –¥–æ–º! –ü—Ä–∏—à–ª–æ—Å—å –æ—Ç–¥–∞—Ç—å 5000 —Ä—É–±–ª–µ–π –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ –º–æ—Ä–¥–µ.", type: "danger", money: -5000, stress: 25, beat: true},
                {message: "üí• –°–ª—É—á–∞–π–Ω–æ –ø–æ–ø–∞–ª –≤ –¥—Ä–∞–∫—É –≤ –±–∞—Ä–µ. –ü–æ—Ç–µ—Ä—è–ª 2000 —Ä—É–±–ª–µ–π –∏ –ø–æ–ª—É—á–∏–ª —Ñ–∏–Ω–≥–∞–ª.", type: "warning", money: -2000, stress: 15, beat: true},
                {message: "üé∞ –í—ã–∏–≥—Ä–∞–ª –≤ –ø–æ–¥–ø–æ–ª—å–Ω–æ–º –∫–∞–∑–∏–Ω–æ 7000 —Ä—É–±–ª–µ–π! –ü–æ–≤–µ–∑–ª–æ, –µ–ø—Ç–∞!", type: "success", money: 7000, stress: -20},
                {message: "üöî –ü–æ–ø–∞–ª—Å—è –Ω–∞ –º–µ–ª–∫–æ–º –ø—Ä–∞–≤–æ–Ω–∞—Ä—É—à–µ–Ω–∏–∏. –®—Ç—Ä–∞—Ñ - 3000 —Ä—É–±–ª–µ–π.", type: "danger", money: -3000, stress: 10},
                {message: "ü§ù –ü–æ–º–æ–≥ —Å–æ—Å–µ–¥—É, –∏ –æ–Ω –≤ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –¥–∞–ª 1500 —Ä—É–±–ª–µ–π.", type: "success", money: 1500, stress: -5},
                {message: "üíº –ù–∞—à—ë–ª –∫–æ—à–µ–ª—ë–∫ —Å 4000 —Ä—É–±–ª–µ–π. –í–µ—Ä–Ω—É–ª –≤–ª–∞–¥–µ–ª—å—Ü—É, –∏ –æ–Ω –¥–∞–ª –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ.", type: "success", money: 2000, stress: -10},
                {message: "üèöÔ∏è –ê—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å –ø–æ–≤—ã—Å–∏–ª –ø–ª–∞—Ç—É –∑–∞ –∫–≤–∞—Ä—Ç–∏—Ä—É –Ω–∞ 2000 —Ä—É–±–ª–µ–π. –ñ–∏–∑–Ω—å - –±–æ–ª—å!", type: "warning", money: -2000, stress: 10},
                {message: "üéØ –í—ã–∏–≥—Ä–∞–ª –≤ –ª–æ—Ç–µ—Ä–µ—é 5000 —Ä—É–±–ª–µ–π! –ù–µ–ø–ª–æ—Ö–æ, —Å—É–∫–∞!", type: "success", money: 5000, stress: -10},
                {message: "üöó –°–ª—É—á–∞–π–Ω–æ –ø–æ—Ü–∞—Ä–∞–ø–∞–ª —á—É–∂—É—é –º–∞—à–∏–Ω—É. –ü—Ä–∏—à–ª–æ—Å—å –∑–∞–ø–ª–∞—Ç–∏—Ç—å 3000 —Ä—É–±–ª–µ–π –∑–∞ —Ä–µ–º–æ–Ω—Ç.", type: "danger", money: -3000, stress: 10},
                {message: "üí© –ù–∞—Å—Ç—É–ø–∏–ª –≤ —Å–æ–±–∞—á—å–µ –≥–æ–≤–Ω–æ. –ü—Ä–∏—à–ª–æ—Å—å –≤—ã–∫–∏—Å–∏—Ç—å –±–æ—Ç–∏–Ω–∫–∏ –∑–∞ 2000 —Ä—É–±–ª–µ–π.", type: "warning", money: -2000, stress: 5},
                {message: "ü§Æ –ü–µ—Ä–µ–ø–∏–ª –≤ –±–∞—Ä–µ. –ü—Ä–æ—Å–Ω—É–ª—Å—è –≤ —Å—É–≥—Ä–æ–±–µ –±–µ–∑ –∫–æ—à–µ–ª—å–∫–∞.", type: "danger", money: -3000, stress: 15}
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            addEvent(event.message, event.type);
            
            gameState.money += event.money;
            gameState.stressLevel += event.stress;
            
            if (event.beat) {
                gameState.isBeaten = true;
            }
            
            if (gameState.money < 0) gameState.money = 0;
            if (gameState.stressLevel < 0) gameState.stressLevel = 0;
            if (gameState.stressLevel > gameState.maxStress) gameState.stressLevel = gameState.maxStress;
        }

        function harassByCreditor(creditor) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–≤–æ–Ω–∫–∞
            gameState.phoneRinging = true;
            setTimeout(() => {
                gameState.phoneRinging = false;
                updateUI();
            }, 3000);
            
            const harassments = [
                `üìû ${creditor.name} –∑–≤–æ–Ω–∏—Ç: "–ê—Ö—É–µ–ª, –±–ª—è–¥—å? –ì–¥–µ –±–∞–±–∫–∏, –µ–±–∞–Ω—ã–π –≤ —Ä–æ—Ç?!"`,
                `üíÄ ${creditor.name} –ø—Ä–∏–≥—Ä–æ–∑–∏–ª: "–ï—Å–ª–∏ –∑–∞–≤—Ç—Ä–∞ –Ω–µ –ø—Ä–∏–Ω–µ—Å–µ—à—å –±–∞–±–∫–∏, —è —Ç–µ–±—è –Ω–∞ —Ö—É–π —Ä–∞–∑—ä–µ–±—É, –º—É–¥–∞–∫!"`,
                `‚öñÔ∏è ${creditor.name} –ø–æ–¥–∞–ª –≤ —Å—É–¥! –î–æ–±–∞–≤–∏–ª–∏—Å—å —Å—É–¥–µ–±–Ω—ã–µ –∏–∑–¥–µ—Ä–∂–∫–∏ 5000 —Ä—É–±–ª–µ–π.`,
                `üëÆ ${creditor.name} –ø—Ä–∏—Å–ª–∞–ª –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–≤! –ü—Ä–∏—à–ª–æ—Å—å –∑–∞–ø–ª–∞—Ç–∏—Ç—å 5000 —Ä—É–±–ª–µ–π –æ—Ç—Å—Ç—É–ø–Ω—ã—Ö.`,
                `üò† ${creditor.name} –æ—Å—Ç–∞–≤–∏–ª –≥–æ–ª–æ—Å–æ–≤–æ–µ: "–°—Ç–µ–ø–∞, —Ç—ã —Å–æ–≤—Å–µ–º –µ–±–ª–∞–Ω? –î–µ–Ω—å–≥–∏ –≥–¥–µ, —Å—É–∫–∞?"`,
                `üí¢ ${creditor.name} –Ω–∞–ø–∏—Å–∞–ª: "–ó–∞–≤—Ç—Ä–∞ –±—É–¥—É —É —Ç–≤–æ–µ–π –ø–∞—Ä–∞—à–∏, –ø–∏–¥–æ—Ä. –ì–æ—Ç–æ–≤—å –±–∞–±–∫–∏ –∏–ª–∏ –≥–æ—Ç–æ–≤—å –∂–æ–ø—É!"`,
                `üìû ${creditor.name} –∑–≤–æ–Ω–∏—Ç: "–¢—ã –¥—É–º–∞–ª, —Å–ø—Ä—è—á–µ—à—å—Å—è, –º—É–¥–∏–ª–∞? –ú—ã —Ç–µ–±—è –≤–µ–∑–¥–µ –Ω–∞–π–¥–µ–º!"`
            ];
            
            const harassment = harassments[Math.floor(Math.random() * harassments.length)];
            addEvent(harassment, "danger");
            
            increaseStress(creditor.aggressiveness * 30);
            
            // –®—Ç—Ä–∞—Ñ –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É
            if (Math.random() < creditor.aggressiveness) {
                const penalty = Math.floor(gameState.debt * 0.05);
                gameState.debt += penalty;
                addEvent(`üìà –ù–∞—á–∏—Å–ª–µ–Ω—ã –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É: ${formatMoney(penalty)}`, "warning");
            }
            
            // –°–ª—É—á–∞–π–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ - –∫—Ä–µ–¥–∏—Ç–æ—Ä—ã –ø—Ä–∏—à–ª–∏
            if (Math.random() < 0.3) {
                setTimeout(() => {
                    const creditorEvents = [
                        `üëÆ –ö—Ä–µ–¥–∏—Ç–æ—Ä—ã –≤–ª–æ–º–∏–ª–∏—Å—å –≤ –¥–æ–º! –ó–∞–±—Ä–∞–ª–∏ 10000 —Ä—É–±–ª–µ–π –∏ –∏–∑–±–∏–ª–∏ –°—Ç–µ–ø—É.`,
                        `üí• ${creditor.name} –ª–∏—á–Ω–æ –ø—Ä–∏—à—ë–ª —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è. –°—Ç–µ–ø–∞ –æ—Ç–¥–∞–ª 8000 —Ä—É–±–ª–µ–π –∏ –ø–æ–ª—É—á–∏–ª –ø–æ –ª–∏—Ü—É.`,
                        `üöî –ö–æ–ª–ª–µ–∫—Ç–æ—Ä—ã –ø–æ–¥–∫–∞—Ä–∞—É–ª–∏–ª–∏ —É –ø–æ–¥—ä–µ–∑–¥–∞. –ó–∞–±—Ä–∞–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5000 —Ä—É–±–ª–µ–π.`
                    ];
                    
                    const event = creditorEvents[Math.floor(Math.random() * creditorEvents.length)];
                    addEvent(event, "danger");
                    
                    gameState.money -= Math.floor(gameState.money * 0.3);
                    gameState.isBeaten = true;
                    increaseStress(25);
                    updateUI();
                }, 1000);
            }
        }

        function checkAchievements() {
            if (gameState.money >= 50000 && !gameState.achievements.includes("–ë–æ–≥–∞—á")) {
                addAchievement("–ë–æ–≥–∞—á: –ù–∞–∫–æ–ø–∏–ª 50,000 —Ä—É–±–ª–µ–π!");
            }
            
            if (gameState.debt <= 0 && !gameState.achievements.includes("–°–≤–æ–±–æ–¥–∞ –æ—Ç –¥–æ–ª–≥–æ–≤")) {
                addAchievement("–°–≤–æ–±–æ–¥–∞ –æ—Ç –¥–æ–ª–≥–æ–≤: –†–∞—Å–ø–ª–∞—Ç–∏–ª—Å—è —Å–æ –≤—Å–µ–º–∏ –¥–æ–ª–≥–∞–º–∏!");
            }
            
            if (gameState.hasCar && !gameState.achievements.includes("–ê–≤—Ç–æ–º–æ–±–∏–ª–∏—Å—Ç")) {
                addAchievement("–ê–≤—Ç–æ–º–æ–±–∏–ª–∏—Å—Ç: –ü—Ä–∏–æ–±—Ä—ë–ª –ø–µ—Ä–≤—É—é –º–∞—à–∏–Ω—É!");
            }
            
            if (gameState.currentCity !== "–ö—É—Ä—Å–∫" && !gameState.achievements.includes("–ë–µ–≥–ª–µ—Ü")) {
                addAchievement("–ë–µ–≥–ª–µ—Ü: –°–±–µ–∂–∞–ª –∏–∑ –ö—É—Ä—Å–∫–∞!");
            }
            
            if (gameState.stressLevel >= 80 && !gameState.achievements.includes("–ù–∞ –≥—Ä–∞–Ω–∏")) {
                addAchievement("–ù–∞ –≥—Ä–∞–Ω–∏: –î–æ—Å—Ç–∏–≥ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è —Å—Ç—Ä–µ—Å—Å–∞!");
            }
            
            if (gameState.day >= 100 && !gameState.achievements.includes("–í—ã–∂–∏–≤–∞–ª—å—â–∏–∫")) {
                addAchievement("–í—ã–∂–∏–≤–∞–ª—å—â–∏–∫: –ü—Ä–æ–∂–∏–ª 100 –¥–Ω–µ–π –≤ –¥–æ–ª–≥–∞—Ö!");
            }
        }

        function checkGameOver() {
            if (gameState.gameOver) return;
            
            // –ü–æ–±–µ–¥–∞ - –¥–æ–ª–≥ –ø–æ–≥–∞—à–µ–Ω –∏ –µ—Å—Ç—å 100–∫+
            if (gameState.debt <= 0 && gameState.money >= gameState.targetMoney) {
                gameState.gameOver = true;
                showGameOver("üéâ –ü–û–ë–ï–î–ê! –°—Ç–µ–ø–∞ –≤—ã–ª–µ–∑ –∏–∑ –¥–æ–ª–≥–æ–≤!", 
                    "–¢—ã —Å–º–æ–≥ –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–∞—Å–ø–ª–∞—Ç–∏—Ç—å—Å—è —Å–æ –≤—Å–µ–º–∏ –¥–æ–ª–≥–∞–º–∏, –Ω–æ –∏ —Å–∫–æ–ø–∏—Ç—å –ø—Ä–∏–ª–∏—á–Ω—É—é —Å—É–º–º—É! " +
                    "–¢–µ–ø–µ—Ä—å –°—Ç–µ–ø–∞ –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∂–∏–∑–Ω—å –±–µ–∑ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ —Ä–∞–±—Å—Ç–≤–∞. " +
                    "–ú–æ–∂–µ—Ç, –¥–∞–∂–µ –æ—Ç–∫—Ä–æ–µ—Ç —Å–≤–æ–π –±–∏–∑–Ω–µ—Å - —à–∞—É—Ä–º–∏—á–Ω—É—é '–£ –°—Ç–µ–ø—ã'!");
                playVictorySound();
                return;
            }
            
            // –ü–æ—Ä–∞–∂–µ–Ω–∏–µ - –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å –≤—Ä–µ–º—è
            if (gameState.day >= gameState.totalDays) {
                gameState.gameOver = true;
                showGameOver("üíÄ –ö–û–ù–ï–¶ –ò–ì–†–´", 
                    "–°—Ç–µ–ø–∞ –Ω–µ —É—Å–ø–µ–ª —Ä–∞—Å–ø–ª–∞—Ç–∏—Ç—å—Å—è —Å –¥–æ–ª–≥–∞–º–∏. –ö—Ä–µ–¥–∏—Ç–æ—Ä—ã –Ω–∞—à–ª–∏ –µ–≥–æ –∏ –∂–µ—Å—Ç–æ–∫–æ –Ω–∞–∫–∞–∑–∞–ª–∏. " +
                    "–¢–µ–ø–µ—Ä—å –æ–Ω –≤–µ—á–Ω–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –Ω–∏—Ö, –æ—Ç–¥–∞–≤–∞—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≥—Ä–æ—à–∏. " +
                    "–¢–∞–∫ –∏ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–∞—Ä–Ω—è –∏–∑ –ö—É—Ä—Å–∫–∞...");
                playGameOverSound();
                return;
            }
            
            // –ü–æ—Ä–∞–∂–µ–Ω–∏–µ - —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π —Å—Ç—Ä–µ—Å—Å
            if (gameState.stressLevel >= gameState.maxStress) {
                gameState.gameOver = true;
                showGameOver("üòµ –°–¢–†–ï–°–°–û–í–ê–Ø –°–ú–ï–†–¢–¨", 
                    "–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ –∫—Ä–µ–¥–∏—Ç–æ—Ä–æ–≤, —É–≥—Ä–æ–∑—ã –∏ –Ω–µ—Ö–≤–∞—Ç–∫–∞ –¥–µ–Ω–µ–≥ —Å–≤–µ–ª–∏ –°—Ç–µ–ø—É —Å —É–º–∞. " +
                    "–û–Ω –Ω–µ –≤—ã–¥–µ—Ä–∂–∞–ª –¥–∞–≤–ª–µ–Ω–∏—è –∏ —Å–∫–æ–Ω—á–∞–ª—Å—è –æ—Ç —Å–µ—Ä–¥–µ—á–Ω–æ–≥–æ –ø—Ä–∏—Å—Ç—É–ø–∞. " +
                    "–î–æ–ª–≥–∏ –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ –µ–≥–æ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤...");
                playGameOverSound();
                return;
            }
            
            // –ü–æ—Ä–∞–∂–µ–Ω–∏–µ - –Ω–µ—Ç –¥–µ–Ω–µ–≥ –∏ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å—á–µ—Ä–ø–∞–Ω—ã
            if (gameState.money <= 0 && 
                gameState.friends.every(f => f.alreadyBorrowed) && 
                !gameState.hasJob) {
                gameState.gameOver = true;
                showGameOver("üèöÔ∏è –ü–û–õ–ù–ê–Ø –ù–ò–©–ï–¢–ê", 
                    "–£ –°—Ç–µ–ø—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å –≤—Å–µ –¥–µ–Ω—å–≥–∏, –≤—Å–µ –¥—Ä—É–∑—å—è –æ—Ç–≤–µ—Ä–Ω—É–ª–∏—Å—å, —Ä–∞–±–æ—Ç—ã –Ω–µ—Ç. " +
                    "–û–Ω –æ—Å—Ç–∞–ª—Å—è –Ω–∞ —É–ª–∏—Ü–µ –±–µ–∑ —Å—Ä–µ–¥—Å—Ç–≤ –∫ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—é. " +
                    "–î–æ–ª–≥–∏ —Ç–∞–∫ –∏ –æ—Å—Ç–∞–ª–∏—Å—å –Ω–µ–ø–æ–≥–∞—à–µ–Ω–Ω—ã–º–∏...");
                playGameOverSound();
                return;
            }
        }

        function showGameOver(title, message) {
            document.getElementById('game-result').textContent = title;
            document.getElementById('game-message').textContent = message;
            document.getElementById('game-over').classList.remove('hidden');
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram
            if (tg && tg.sendData) {
                tg.sendData(JSON.stringify({
                    gameResult: title,
                    finalDay: gameState.day,
                    finalMoney: gameState.money,
                    finalDebt: gameState.debt
                }));
            }
        }

        function restartGame() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
            gameState = {
                day: 1,
                totalDays: 365,
                money: 5000,
                debt: 100000,
                targetMoney: 100000,
                hasCar: false,
                carModel: "",
                hasJob: false,
                currentCity: "–ö—É—Ä—Å–∫",
                isAlive: true,
                gameOver: false,
                stressLevel: 0,
                maxStress: 100,
                isBeaten: false,
                phoneRinging: false,
                achievements: [],
                friends: [
                    {name: "–í–∞—Å—å–∫–∞", character: "—â–µ–¥—Ä—ã–π", description: "–°—Ç–∞—Ä—ã–π –¥—Ä—É–≥, –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å, –Ω–æ –µ—Å–ª–∏ –Ω–µ –≤–µ—Ä–Ω–µ—à—å - –ø–æ –ø–æ—á–∫–∞–º –ø–æ–ª—É—á–∏—à—å", maxLoan: 15000, alreadyBorrowed: false, successChance: 0.7},
                    {name: "–ü–µ—Ç—Ä–æ", character: "–∂–∞–¥–Ω—ã–π", description: "–°—á–∏—Ç–∞–µ—Ç –∫–∞–∂–¥—É—é –∫–æ–ø–µ–π–∫—É. –í –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑ –∑–∞–Ω—è–ª 1000 —Ä—É–±–ª–µ–π –∏ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª 1100 –æ–±—Ä–∞—Ç–Ω–æ —á–µ—Ä–µ–∑ –¥–µ–Ω—å", maxLoan: 5000, alreadyBorrowed: false, successChance: 0.3},
                    {name: "–°–µ–º—ë–Ω", character: "–¥–æ–±—Ä—ã–π", description: "–í—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å, –Ω–æ –µ–≥–æ –∂–µ–Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ä—ë—Ç, —á—Ç–æ –æ–Ω –ª–æ—Ö", maxLoan: 10000, alreadyBorrowed: false, successChance: 0.8},
                    {name: "–ì—Ä–∏—à–∞", character: "–±–∞–Ω–¥–∏—Ç", description: "–û–¥–æ–ª–∂–∏—Ç, –Ω–æ –ø–æ—Ç–æ–º –ø—Ä–∏–π–¥–µ—Ç—Å—è –æ—Ç–±–∏–≤–∞—Ç—å—Å—è. –ú–æ–∂–µ—Ç –∏ –Ω–æ–≥–æ–π –ø–æ–¥–¥–∞—Ç—å –∑–∞ –ø—Ä–æ—Å—Ä–æ—á–∫—É", maxLoan: 20000, alreadyBorrowed: false, successChance: 0.9},
                    {name: "–ö–æ–ª—è", character: "–∞–ª–∫–∞—à", description: "–°–∞–º –≤–µ—á–Ω–æ –≤ –¥–æ–ª–≥–∞—Ö –∫–∞–∫ –≤ —à–µ–ª–∫–∞—Ö. –ú–æ–∂–µ—Ç –¥–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–∞—à–µ–ª –∑–∞–Ω–∞—á–∫—É", maxLoan: 3000, alreadyBorrowed: false, successChance: 0.2},
                    {name: "–ú–∏—à–∞", character: "–±–∏–∑–Ω–µ—Å–º–µ–Ω", description: "–ó–∞–Ω—è—Ç—å –º–æ–∂–Ω–æ, –Ω–æ –ø–æ–¥ –ø—Ä–æ—Ü–µ–Ω—Ç—ã. –ò —Å —Ä–∞—Å–ø–∏—Å–∫–æ–π —É –Ω–æ—Ç–∞—Ä–∏—É—Å–∞", maxLoan: 25000, alreadyBorrowed: false, successChance: 0.6},
                    {name: "–ê–Ω—Ç–æ–Ω", character: "—Å—Ç—É–¥–µ–Ω—Ç", description: "–î–µ–Ω–µ–≥ –Ω–µ—Ç, –Ω–æ –¥–µ—Ä–∂–∏—Å—å. –°–∞–º –∂–∏–≤–µ—Ç –Ω–∞ –¥–æ—à–∏—Ä–∞–∫–µ –∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ", maxLoan: 2000, alreadyBorrowed: false, successChance: 0.1},
                    {name: "–î–∏–º–∞", character: "—Ä–∞—Ü–∏–æ–Ω–∞–ª–∏—Å—Ç", description: "–ü–æ–ø—Ä–æ—Å–∏—Ç –±–∏–∑–Ω–µ—Å-–ø–ª–∞–Ω –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞. –ó–∞–¥–æ–ª–±–∞–µ—Ç –≤–æ–ø—Ä–æ—Å–∞–º–∏", maxLoan: 8000, alreadyBorrowed: false, successChance: 0.5},
                    {name: "–ñ–µ–Ω—è", character: "–≤–µ–∑—É–Ω—á–∏–∫", description: "–ú–æ–∂–µ—Ç –¥–∞—Ç—å –±–æ–ª—å—à–µ, —á–µ–º –ø—Ä–æ—Å–∏—à—å, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–∏–≥—Ä–∞–µ—Ç –≤ –ø–æ–∫–µ—Ä", maxLoan: 12000, alreadyBorrowed: false, successChance: 0.4},
                    {name: "–°–ª–∞–≤–∞", character: "—Ñ–∏–Ω–∞–Ω—Å–∏—Å—Ç", description: "–î–∞—Å—Ç –≤ –¥–æ–ª–≥, –Ω–æ —Å –∂–µ—Å—Ç–∫–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏. –í–µ—Ä–Ω–µ—à—å –Ω–µ –≤–æ–≤—Ä–µ–º—è - –∑–∞–ª–æ–∂–∏—Ç —Ç–≤–æ—é –ø–æ—á–∫—É", maxLoan: 18000, alreadyBorrowed: false, successChance: 0.6}
                ],
                creditors: [
                    {name: "–ë–∞–Ω–∫ '–ö—É—Ä—Å–∫–§–∏–Ω–∞–Ω—Å'", type: "–±–∞–Ω–∫", amount: 50000, daysUntilCall: 30, aggressiveness: 0.3},
                    {name: "–ú–∏–∫—Ä–æ—Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è '–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–Ω—å–≥–∏'", type: "–º—Ñ–æ", amount: 20000, daysUntilCall: 15, aggressiveness: 0.7},
                    {name: "–ë—Ä–∞—Ç–æ–∫ –°–µ—Ä—ë–≥–∞", type: "–±—Ä–∞—Ç–æ–∫", amount: 30000, daysUntilCall: 10, aggressiveness: 0.9}
                ],
                cars: [
                    {name: "–õ–∞–¥–∞ –ì—Ä–∞–Ω—Ç–∞", price: 35000, scamChance: 0.85, description: "–¶—ã–≥–∞–Ω –∫–ª—è–Ω–µ—Ç—Å—è, —á—Ç–æ –º–∞—à–∏–Ω–∞ —Ç–æ–ª—å–∫–æ —Å –∑–∞–≤–æ–¥–∞, –Ω–æ –ø–∞—Ö–Ω–µ—Ç –æ–Ω–∞ –∫–∞–∫ –±—É–¥—Ç–æ –µ–µ —Å–æ–±–∏—Ä–∞–ª–∏ –≤ –≥–∞—Ä–∞–∂–µ —É –∞–ª–∫–∞—à–∞"},
                    {name: "–ñ–∏–≥—É–ª–∏", price: 15000, scamChance: 0.5, description: "–î–µ–¥—É—à–∫–∞ –æ–¥–∏–Ω –≤–ª–∞–¥–µ–ª, –Ω–µ –±–∏—Ç–∞, –Ω–µ –∫—Ä–∞—à–µ–Ω–∞. –ü—Ä–∞–≤–¥–∞, –¥–µ–¥—É—à–∫–∞ –±—ã–ª —Å–ª–µ–ø–æ–π –∏ –≥–ª—É—Ö–æ–π, —Ç–∞–∫ —á—Ç–æ –º–æ–≥ –∏ –Ω–µ –∑–∞–º–µ—Ç–∏—Ç—å"},
                    {name: "–ú–æ—Å–∫–≤–∏—á 412", price: 8000, scamChance: 0.3, description: "–†–∞—Ä–∏—Ç–µ—Ç, –Ω–æ –µ–∑–¥–∏—Ç (–∏–Ω–æ–≥–¥–∞). –ï—Å–ª–∏ –ø–æ–≤–µ–∑—ë—Ç, –¥–æ–µ–¥–µ—à—å –¥–æ –¥–æ–º–∞, –∞ –Ω–µ –¥–æ –∫–ª–∞–¥–±–∏—â–∞"},
                    {name: "–¢–∞–≤—Ä–∏—è", price: 12000, scamChance: 0.6, description: "–£–∫—Ä–∞–∏–Ω—Å–∫–∞—è –º–µ—á—Ç–∞, –Ω–æ —Å –ø—Ä–æ–±–µ–≥–æ–º –¥–æ –õ—É–Ω—ã –∏ –æ–±—Ä–∞—Ç–Ω–æ. –ö–æ–Ω—Å–µ—Ä–≤–Ω–∞—è –±–∞–Ω–∫–∞ –Ω–∞ –∫–æ–ª—ë—Å–∞—Ö"},
                    {name: "–í–æ–ª–≥–∞", price: 60000, scamChance: 0.9, description: "–¶—ã–≥–∞–Ω –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —ç—Ç–æ –º–∞—à–∏–Ω–∞ –¥–ª—è –ø–∞—Ñ–æ—Å–∞, –Ω–æ –ø–∞—Ñ–æ—Å –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –¥–æ—Ä–æ–∂–µ. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —É–≥–Ω–∞–Ω–∞—è"},
                    {name: "–ó–∞–ø–æ—Ä–æ–∂–µ—Ü—å", price: 5000, scamChance: 0.1, description: "–£—à–∞—Ç–∞–Ω—ã–π —Ç–∞–∑–∏–∫, –Ω–æ –∑–∞—Ç–æ —Å–≤–æ–π. –ù–∞ —ç—Ç–æ–º —Ö–ª–∞–º–µ —Ç–µ–±—è —Ç–æ—á–Ω–æ –Ω–µ –ø—Ä–∏–º—É—Ç –∑–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ"},
                    {name: "–ß–∞–π–∫–∞", price: 90000, scamChance: 0.95, description: "–¶—ã–≥–∞–Ω –∫–ª—è–Ω—ë—Ç—Å—è, —á—Ç–æ –Ω–∞ —ç—Ç–æ–π –º–∞—à–∏–Ω–µ –µ–∑–¥–∏–ª —Å–∞–º –ë—Ä–µ–∂–Ω–µ–≤. –ò –ø–æ—Ö–æ–∂–µ, –æ–Ω–∞ —Å —Ç–µ—Ö –ø–æ—Ä –∏ –Ω–µ —Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∞—Å—å"}
                ],
                stressReliefOptions: [
                    {name: "–ü–∏–≤–æ –≤ –±–∞—Ä–µ", cost: 500, stressRelief: 10, description: "–ü–∞—Ä—É –∫—Ä—É–∂–µ—á–µ–∫ –ø–æ–º–æ–≥—É—Ç –∑–∞–±—ã—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö. –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã—Ö, –µ—Å–ª–∏ –ø–æ–¥–µ—Ä–µ—à—å—Å—è"},
                    {name: "–í–∏—Å–∫–∏ –¥–æ–º–∞", cost: 2000, stressRelief: 25, description: "–ë—É—Ç—ã–ª–æ—á–∫–∞ —Ö–æ—Ä–æ—à–µ–≥–æ –≤–∏—Å–∫–∏ - –ª—É—á—à–µ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ. –ü—Ä–æ—Å–Ω–µ—à—å—Å—è —Å –ø–æ—Ö–º–µ–ª—å–µ–º –∏ –±–µ–∑ –¥–µ–Ω–µ–≥"},
                    {name: "–ú–∞—Å—Å–∞–∂", cost: 5000, stressRelief: 40, description: "–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂ —Å–Ω–∏–º–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ. –ï—Å–ª–∏ –º–∞—Å—Å–∞–∂–∏—Å—Ç–∫–∞ –Ω–µ –æ–∫–∞–∂–µ—Ç—Å—è —Ç—Ä–∞–Ω—Å–æ–º"},
                    {name: "–ü–æ–µ–∑–¥–∫–∞ –Ω–∞ –º–æ—Ä–µ", cost: 15000, stressRelief: 70, description: "–ù–µ–¥–µ–ª—è –æ—Ç–¥—ã—Ö–∞ –Ω–∞ –º–æ—Ä–µ –≤–µ—Ä–Ω–µ—Ç –≤–∫—É—Å –∫ –∂–∏–∑–Ω–∏. –ò —É–≤–µ–ª–∏—á–∏—Ç –¥–æ–ª–≥ –Ω–∞ 15–∫"},
                    {name: "–î–µ–≤—É—à–∫–∞ –ø–æ –≤—ã–∑–æ–≤—É", cost: 10000, stressRelief: 50, description: "–ù–∞ —á–∞—Å –∑–∞–±—É–¥–µ—à—å –æ –¥–æ–ª–≥–∞—Ö. –ê –ø–æ—Ç–æ–º –µ—â—ë –∏ –≤–µ–Ω–µ—Ä–∏—á–µ—Å–∫–∏–µ –±–æ–ª–µ–∑–Ω–∏ –ª–µ—á–∏—Ç—å"},
                    {name: "–ê–ª–∫–æ–≥–æ–ª—å–Ω—ã–π –∑–∞–ø–æ–π", cost: 3000, stressRelief: 60, description: "–ù–∞ —Ç—Ä–æ–µ —Å—É—Ç–æ–∫ –≤—ã—Ä—É–±–∏—à—å—Å—è. –ü—Ä–æ—Å–Ω–µ—à—å—Å—è –≤ –≤—ã—Ç—Ä–µ–∑–≤–∏—Ç–µ–ª–µ –±–µ–∑ —à—Ç–∞–Ω–æ–≤"}
                ],
                events: []
            };
            
            // –û—á–∏—â–∞–µ–º —Å–æ–±—ã—Ç–∏—è
            document.getElementById('events').innerHTML = '<div class="event event-info"><span class="event-icon">üì¢</span>–î–µ–Ω—å 1: –°—Ç–µ–ø–∞ –ø—Ä–æ—Å–Ω—É–ª—Å—è –≤ —Ö–æ–ª–æ–¥–Ω–æ–º –ø–æ—Ç—É. –î–æ–ª–≥ 100–∫, –∞ –¥–µ–Ω–µ–≥ –≤—Å–µ–≥–æ 5–∫. –ñ–∏–∑–Ω—å - –±–æ–ª—å!</div>';
            
            // –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
            document.getElementById('game-over').classList.add('hidden');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUI();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            updateUI();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ Telegram
            tg.MainButton.onClick(function() {
                restartGame();
            });
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∞—É–¥–∏–æ–∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
            document.body.addEventListener('click', function() {
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
            }, { once: true });
        });
    </script>
</body>
</html>